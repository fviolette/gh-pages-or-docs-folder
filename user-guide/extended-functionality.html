<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2017"><meta name="DC.rights.owner" content="(C) Copyright 2017"><meta name="DC.Type" content="reference"><meta name="description" content="DITA-OT provides additional code reference processing support beyond that which is mandated by the DITA specification. These extensions can be used to define character encodings or line ranges for use in code blocks."><meta name="DC.Relation" scheme="URI" content="../user-guide/DITA_spec-support.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="extended-functionality"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>Extended functionality</title></head><body id="extended-functionality"><main role="main"><article role="article" aria-labelledby="ariaid-title1">

  <h1 class="title topictitle1" id="ariaid-title1">Extended functionality</h1>

  <p class="shortdesc">DITA-OT provides additional code reference processing support beyond that which is mandated by the DITA
    specification. These extensions can be used to define character encodings or line ranges for use in code
    blocks.</p>

  <nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../user-guide/DITA_spec-support.html" title="DITA Open Toolkit 2.3 supports all versions of the OASIS DITA specification, including 1.0, 1.1, 1.2, and 1.3.">DITA specification support</a></div></div></nav><article class="topic reference nested1" aria-labelledby="ariaid-title2" id="extended-functionality__code-reference">
    <h2 class="title topictitle2" id="ariaid-title2">Code reference processing</h2>
    <div class="body refbody">
      <section class="section" id="code-reference__coderef-charset"><h3 class="title sectiontitle">Character set definition</h3>
        
        <p class="p">DITA-OT supports defining the code reference target file encoding using the <code class="keyword markupname xmlatt">@format</code>
          attribute. The supported format is:</p>
        <pre class="pre codeblock"><code>format (";" space* "charset=" charset)?</code></pre>
        <p class="p">If a character set is not defined, the system default character set will be used. If the character set is not
          recognized or supported, the <span class="keyword msgnum">DOTJ052E</span> error is thrown and the system default character set is
          used as a fall-back.</p>
      </section>
      <div class="example">
        <pre class="pre codeblock"><code>&lt;coderef href="unicode.txt" format="txt; charset=UTF-8"/&gt;</code></pre>
      </div>
      <section class="section"><h3 class="title sectiontitle">Line range extraction</h3>
        
        <p class="p">Code references can be limited to extract only a specified line range by defining the
            <code class="ph codeph">line-range</code> pointer in the URI fragment. The format is:</p>
        <pre class="pre codeblock"><code>uri ("#line-range(" start ("," end)? ")" )?</code></pre>
        <p class="p">Start and end line numbers start from 1 and are inclusive. If the end range is omitted, the range ends on the
          last line of the file.</p>
      </section>
      <div class="example">
        <pre class="pre codeblock"><code>&lt;coderef href="Parser.scala#line-range(5, 10)" format="scala"/&gt;</code></pre>
        <p class="p">Only lines from 5 to 10 will be included in the output.</p>
      </div>
      <section class="section"><h3 class="title sectiontitle">RFC 5147</h3>
        
        <p class="p">DITA-OT implements line position and range from <a class="xref" href="http://tools.ietf.org/html/rfc5147" target="_blank">RFC 5147</a>. The format for line range is:</p>
        <pre class="pre codeblock"><code>uri ("#line=" start? "," end? )?</code></pre>
        <p class="p">Start and end line numbers start from 0 and are inclusive and exclusive, respectively. If the start range is
          omitted, the range starts from the first line; if the end range is omitted, the range ends on the last line of
          the file. The format for line position is:</p>
        <pre class="pre codeblock"><code>uri ("#line=" position )?</code></pre>
        <p class="p">Position line number starts from 0.</p>
      </section>
      <div class="example">
        <pre class="pre codeblock"><code>&lt;coderef href="Parser.scala#line=4,10" format="scala"/&gt;</code></pre>
        <p class="p">Only lines from 5 to 10 will be included in the output.</p>
      </div>
    </div>
  </article>
</article></main></body></html>